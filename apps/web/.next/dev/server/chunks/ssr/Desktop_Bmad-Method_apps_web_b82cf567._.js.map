{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jdc/Desktop/Bmad-Method/apps/web/components/layout/SectionHeader.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { PropsWithChildren } from 'react';\r\n\r\ninterface SectionHeaderProps extends PropsWithChildren {\r\n  subtitle?: string;\r\n  actions?: React.ReactNode;\r\n}\r\n\r\nexport function SectionHeader({ children, subtitle, actions }: SectionHeaderProps) {\r\n  return (\r\n    <header className=\"section-header\">\r\n      <div>\r\n        <h2>{children}</h2>\r\n        {subtitle && <p>{subtitle}</p>}\r\n      </div>\r\n      {actions && <div className=\"section-actions\">{actions}</div>}\r\n      <style jsx>{`\r\n        .section-header {\r\n          display: flex;\r\n          flex-wrap: wrap;\r\n          gap: var(--space-3);\r\n          align-items: flex-end;\r\n          justify-content: space-between;\r\n        }\r\n        h2 {\r\n          margin: 0;\r\n          color: var(--color-neutral-3);\r\n          font-size: 1.5rem;\r\n          letter-spacing: -0.01em;\r\n        }\r\n        p {\r\n          margin: var(--space-2) 0 0;\r\n          color: var(--color-neutral-2);\r\n          line-height: 1.5;\r\n        }\r\n      `}</style>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;;AASO,SAAS,cAAc,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAsB;IAC/E,qBACE,2QAAC;kDAAiB;;0BAChB,2QAAC;;;kCACC,2QAAC;;kCAAI;;;;;;oBACJ,0BAAY,2QAAC;;kCAAG;;;;;;;;;;;;YAElB,yBAAW,2QAAC;0DAAc;0BAAmB;;;;;;;;;;;;;;;;AAuBpD","debugId":null}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jdc/Desktop/Bmad-Method/apps/web/components/layout/ResponsiveGrid.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { PropsWithChildren } from 'react';\r\n\r\ninterface ResponsiveGridProps extends PropsWithChildren {\r\n  columns?: number;\r\n}\r\n\r\nexport function ResponsiveGrid({ children, columns = 3 }: ResponsiveGridProps) {\r\n  return (\r\n    <div className=\"responsive-grid\">\r\n      {children}\r\n      <style jsx>{`\r\n        .responsive-grid {\r\n          display: grid;\r\n          gap: var(--space-4);\r\n          grid-template-columns: repeat(${columns}, minmax(0, 1fr));\r\n        }\r\n        @media (max-width: 1200px) {\r\n          .responsive-grid {\r\n            grid-template-columns: repeat(2, minmax(0, 1fr));\r\n          }\r\n        }\r\n        @media (max-width: 768px) {\r\n          .responsive-grid {\r\n            grid-template-columns: minmax(0, 1fr);\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;;AAQO,SAAS,eAAe,EAAE,QAAQ,EAAE,UAAU,CAAC,EAAuB;IAC3E,qBACE,2QAAC;;;;;oBAMqC;;;mBANvB;;YACZ;;;;oBAKmC;;2HAAA;;;;;;;;AAe1C","debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jdc/Desktop/Bmad-Method/apps/web/components/ui/Card.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { PropsWithChildren } from 'react';\r\n\r\ntype CardProps = PropsWithChildren<{\r\n  title?: string;\r\n  description?: string;\r\n  accent?: 'success' | 'warning' | 'critical' | 'info';\r\n}>;\r\n\r\nconst accentStyles: Record<NonNullable<CardProps['accent']>, string> = {\r\n  success: 'var(--color-success)',\r\n  warning: 'var(--color-calm-gold)',\r\n  critical: 'var(--color-coral)',\r\n  info: 'var(--color-soft-aqua)'\r\n};\r\n\r\nexport function Card({ title, description, accent, children }: CardProps) {\r\n  return (\r\n    <article className=\"card\" data-accent={accent ?? 'none'}>\r\n      {(title || description) && (\r\n        <header>\r\n          {title && <h3>{title}</h3>}\r\n          {description && <p className=\"card-description\">{description}</p>}\r\n        </header>\r\n      )}\r\n      <div>{children}</div>\r\n      <style jsx>{`\r\n        .card {\r\n          position: relative;\r\n          background: var(--color-neutral-0);\r\n          border-radius: var(--radius-md);\r\n          padding: var(--space-5);\r\n          box-shadow: var(--shadow-card);\r\n          border: 1px solid var(--app-border-subtle);\r\n          display: grid;\r\n          gap: var(--space-5);\r\n        }\r\n        .card::before {\r\n          content: '';\r\n          position: absolute;\r\n          inset: 0;\r\n          border-radius: calc(var(--radius-md) - 1px);\r\n          border: 1px solid transparent;\r\n          pointer-events: none;\r\n        }\r\n        .card[data-accent='success']::before {\r\n          border-top-color: ${accentStyles.success};\r\n        }\r\n        .card[data-accent='warning']::before {\r\n          border-top-color: ${accentStyles.warning};\r\n        }\r\n        .card[data-accent='critical']::before {\r\n          border-top-color: ${accentStyles.critical};\r\n        }\r\n        .card[data-accent='info']::before {\r\n          border-top-color: ${accentStyles.info};\r\n        }\r\n        header h3 {\r\n          margin: 0;\r\n          font-size: 1.125rem;\r\n          color: var(--color-neutral-3);\r\n          letter-spacing: -0.01em;\r\n        }\r\n        .card-description {\r\n          margin: var(--space-2) 0 0;\r\n          color: var(--color-neutral-2);\r\n          line-height: 1.5;\r\n        }\r\n        @media (max-width: 768px) {\r\n          .card {\r\n            padding: var(--space-4);\r\n          }\r\n        }\r\n      `}</style>\r\n    </article>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;;AAUA,MAAM,eAAiE;IACrE,SAAS;IACT,SAAS;IACT,UAAU;IACV,MAAM;AACR;AAEO,SAAS,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,EAAE,QAAQ,EAAa;IACtE,qBACE,2QAAC;QAAyB,eAAa,UAAU;iDAA9B;;YAChB,CAAC,SAAS,WAAW,mBACpB,2QAAC;;;oBACE,uBAAS,2QAAC;;kCAAI;;;;;;oBACd,6BAAe,2QAAC;iEAAY;kCAAoB;;;;;;;;;;;;0BAGrD,2QAAC;;0BAAK;;;;;;;;4eAqBkB,aAAa,OAAO,2EAGpB,aAAa,OAAO,4EAGpB,aAAa,QAAQ,wEAGrB,aAAa,IAAI;;;;;;;;AAqB/C","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jdc/Desktop/Bmad-Method/apps/web/components/ui/StatusBadge.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { PropsWithChildren } from 'react';\r\n\r\ntype Variant = 'success' | 'warning' | 'critical' | 'info' | 'neutral';\r\n\r\nconst variantStyles: Record<Variant, { background: string; color: string; icon: string; border: string }> = {\r\n  success: {\r\n    background: 'rgba(16, 185, 129, 0.14)',\r\n    color: '#047857',\r\n    icon: '●',\r\n    border: 'rgba(16, 185, 129, 0.28)'\r\n  },\r\n  warning: {\r\n    background: 'rgba(245, 158, 11, 0.16)',\r\n    color: '#92400e',\r\n    icon: '●',\r\n    border: 'rgba(245, 158, 11, 0.32)'\r\n  },\r\n  critical: {\r\n    background: 'rgba(239, 68, 68, 0.16)',\r\n    color: '#b91c1c',\r\n    icon: '●',\r\n    border: 'rgba(239, 68, 68, 0.32)'\r\n  },\r\n  info: {\r\n    background: 'rgba(37, 99, 235, 0.16)',\r\n    color: '#1d4ed8',\r\n    icon: '●',\r\n    border: 'rgba(37, 99, 235, 0.32)'\r\n  },\r\n  neutral: {\r\n    background: 'rgba(100, 116, 139, 0.14)',\r\n    color: '#475569',\r\n    icon: '●',\r\n    border: 'rgba(100, 116, 139, 0.24)'\r\n  }\r\n};\r\n\r\ninterface StatusBadgeProps extends PropsWithChildren {\r\n  variant?: Variant;\r\n  tooltip?: string;\r\n}\r\n\r\nexport function StatusBadge({ children, variant = 'neutral', tooltip }: StatusBadgeProps) {\r\n  const { background, color, icon, border } = variantStyles[variant];\r\n  return (\r\n    <span className=\"status-badge\" data-variant={variant} title={tooltip ?? undefined}>\r\n      <span aria-hidden=\"true\" className=\"status-badge__icon\">\r\n        {icon}\r\n      </span>\r\n      <span className=\"status-badge__text\">{children}</span>\r\n      <style jsx>{`\r\n        .status-badge {\r\n          display: inline-flex;\r\n          align-items: center;\r\n          justify-content: flex-start;\r\n          gap: var(--space-2);\r\n          padding: 0 var(--space-3);\r\n          min-height: 28px;\r\n          border-radius: var(--radius-xs);\r\n          font-size: 0.8125rem;\r\n          font-weight: 600;\r\n          background: ${background};\r\n          color: ${color};\r\n          border: 1px solid ${border};\r\n        }\r\n        .status-badge__icon {\r\n          font-size: 0.625rem;\r\n          line-height: 1;\r\n        }\r\n        .status-badge__text {\r\n          line-height: 1.2;\r\n        }\r\n      `}</style>\r\n    </span>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;;AAMA,MAAM,gBAAsG;IAC1G,SAAS;QACP,YAAY;QACZ,OAAO;QACP,MAAM;QACN,QAAQ;IACV;IACA,SAAS;QACP,YAAY;QACZ,OAAO;QACP,MAAM;QACN,QAAQ;IACV;IACA,UAAU;QACR,YAAY;QACZ,OAAO;QACP,MAAM;QACN,QAAQ;IACV;IACA,MAAM;QACJ,YAAY;QACZ,OAAO;QACP,MAAM;QACN,QAAQ;IACV;IACA,SAAS;QACP,YAAY;QACZ,OAAO;QACP,MAAM;QACN,QAAQ;IACV;AACF;AAOO,SAAS,YAAY,EAAE,QAAQ,EAAE,UAAU,SAAS,EAAE,OAAO,EAAoB;IACtF,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,aAAa,CAAC,QAAQ;IAClE,qBACE,2QAAC;QAA8B,gBAAc;QAAS,OAAO,WAAW;;;;;oBAgBpD;oBACL;oBACW;;;mBAlBV;;0BACd,2QAAC;gBAAK,eAAY;;;;;4BAeA;4BACL;4BACW;;;2BAjBW;0BAChC;;;;;;0BAEH,2QAAC;;;;;4BAYiB;4BACL;4BACW;;;2BAdR;0BAAsB;;;;;;;;;oBAYpB;oBACL;oBACW;;4MAFN,oCACL,0BACW;;;;;;;;AAY9B","debugId":null}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jdc/Desktop/Bmad-Method/apps/web/services/api/playbooks.ts"],"sourcesContent":["import { CoreApiError } from './housekeeping';\r\n\r\nconst CORE_API_BASE_URL =\r\n  process.env.NEXT_PUBLIC_CORE_API_BASE_URL ?? 'http://localhost:8000';\r\n\r\nexport interface PlaybookTemplatePayload {\r\n  name: string;\r\n  summary: string;\r\n  tags: string[];\r\n  steps: string[];\r\n}\r\n\r\nexport interface PlaybookTemplate {\r\n  id: number;\r\n  name: string;\r\n  summary: string;\r\n  tags: string[];\r\n  steps: string[];\r\n  executionCount: number;\r\n  lastExecutedAt: string | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface PlaybookExecutionResponse {\r\n  runId: string;\r\n  playbookId: number;\r\n  status: string;\r\n  initiatedBy: string | null;\r\n  startedAt: string;\r\n  finishedAt: string | null;\r\n  message: string;\r\n}\r\n\r\ninterface PlaybookTemplateDto {\r\n  id: number;\r\n  name: string;\r\n  summary: string;\r\n  tags: string[];\r\n  steps: string[];\r\n  execution_count: number;\r\n  last_executed_at: string | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\ninterface PlaybookExecutionDto {\r\n  run_id: string;\r\n  playbook_id: number;\r\n  status: string;\r\n  initiated_by: string | null;\r\n  started_at: string;\r\n  finished_at: string | null;\r\n  message: string;\r\n}\r\n\r\nexport async function listPlaybooks(signal?: AbortSignal): Promise<PlaybookTemplate[]> {\r\n  const url = new URL('/playbooks', CORE_API_BASE_URL);\r\n  const response = await fetch(url, {\r\n    method: 'GET',\r\n    headers: { Accept: 'application/json' },\r\n    signal,\r\n    cache: 'no-store'\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const body = await safeReadJson(response);\r\n    throw new CoreApiError('Failed to load playbooks', response.status, body);\r\n  }\r\n\r\n  const payload = (await response.json()) as PlaybookTemplateDto[];\r\n  return payload.map(mapTemplate);\r\n}\r\n\r\nexport async function createPlaybook(\r\n  payload: PlaybookTemplatePayload\r\n): Promise<PlaybookTemplate> {\r\n  const url = new URL('/playbooks', CORE_API_BASE_URL);\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify(toSnakeCaseKeys(payload))\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const body = await safeReadJson(response);\r\n    throw new CoreApiError('Failed to create playbook', response.status, body);\r\n  }\r\n\r\n  const dto = (await response.json()) as PlaybookTemplateDto;\r\n  return mapTemplate(dto);\r\n}\r\n\r\nexport async function executePlaybook(\r\n  playbookId: number,\r\n  initiatedBy?: string | null\r\n): Promise<PlaybookExecutionResponse> {\r\n  const url = new URL(`/playbooks/${playbookId}/execute`, CORE_API_BASE_URL);\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ initiated_by: initiatedBy ?? 'web-app', context: {} })\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const body = await safeReadJson(response);\r\n    throw new CoreApiError('Failed to execute playbook', response.status, body);\r\n  }\r\n\r\n  const dto = (await response.json()) as PlaybookExecutionDto;\r\n  return {\r\n    runId: dto.run_id,\r\n    playbookId: dto.playbook_id,\r\n    status: dto.status,\r\n    initiatedBy: dto.initiated_by,\r\n    startedAt: dto.started_at,\r\n    finishedAt: dto.finished_at,\r\n    message: dto.message\r\n  };\r\n}\r\n\r\nfunction mapTemplate(dto: PlaybookTemplateDto): PlaybookTemplate {\r\n  return {\r\n    id: dto.id,\r\n    name: dto.name,\r\n    summary: dto.summary,\r\n    tags: dto.tags,\r\n    steps: dto.steps,\r\n    executionCount: dto.execution_count,\r\n    lastExecutedAt: dto.last_executed_at,\r\n    createdAt: dto.created_at,\r\n    updatedAt: dto.updated_at\r\n  };\r\n}\r\n\r\nasync function safeReadJson(response: Response): Promise<unknown> {\r\n  try {\r\n    return await response.json();\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction toSnakeCase(input: string): string {\r\n  return input\r\n    .replace(/[A-Z]/g, (match) => `_${match.toLowerCase()}`)\r\n    .replace(/^_/, '');\r\n}\r\n\r\nfunction toSnakeCaseKeys(payload: PlaybookTemplatePayload): Record<string, unknown> {\r\n  return Object.entries(payload).reduce<Record<string, unknown>>((acc, [key, value]) => {\r\n    if (Array.isArray(value)) {\r\n      acc[toSnakeCase(key)] = value;\r\n      return acc;\r\n    }\r\n    acc[toSnakeCase(key)] = value;\r\n    return acc;\r\n  }, {});\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;;AAEA,MAAM,oBACJ,6DAA6C;AAqDxC,eAAe,cAAc,MAAoB;IACtD,MAAM,MAAM,IAAI,IAAI,cAAc;IAClC,MAAM,WAAW,MAAM,MAAM,KAAK;QAChC,QAAQ;QACR,SAAS;YAAE,QAAQ;QAAmB;QACtC;QACA,OAAO;IACT;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,OAAO,MAAM,aAAa;QAChC,MAAM,IAAI,sLAAY,CAAC,4BAA4B,SAAS,MAAM,EAAE;IACtE;IAEA,MAAM,UAAW,MAAM,SAAS,IAAI;IACpC,OAAO,QAAQ,GAAG,CAAC;AACrB;AAEO,eAAe,eACpB,OAAgC;IAEhC,MAAM,MAAM,IAAI,IAAI,cAAc;IAClC,MAAM,WAAW,MAAM,MAAM,KAAK;QAChC,QAAQ;QACR,SAAS;YACP,QAAQ;YACR,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC,gBAAgB;IACvC;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,OAAO,MAAM,aAAa;QAChC,MAAM,IAAI,sLAAY,CAAC,6BAA6B,SAAS,MAAM,EAAE;IACvE;IAEA,MAAM,MAAO,MAAM,SAAS,IAAI;IAChC,OAAO,YAAY;AACrB;AAEO,eAAe,gBACpB,UAAkB,EAClB,WAA2B;IAE3B,MAAM,MAAM,IAAI,IAAI,CAAC,WAAW,EAAE,WAAW,QAAQ,CAAC,EAAE;IACxD,MAAM,WAAW,MAAM,MAAM,KAAK;QAChC,QAAQ;QACR,SAAS;YACP,QAAQ;YACR,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE,cAAc,eAAe;YAAW,SAAS,CAAC;QAAE;IAC7E;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,OAAO,MAAM,aAAa;QAChC,MAAM,IAAI,sLAAY,CAAC,8BAA8B,SAAS,MAAM,EAAE;IACxE;IAEA,MAAM,MAAO,MAAM,SAAS,IAAI;IAChC,OAAO;QACL,OAAO,IAAI,MAAM;QACjB,YAAY,IAAI,WAAW;QAC3B,QAAQ,IAAI,MAAM;QAClB,aAAa,IAAI,YAAY;QAC7B,WAAW,IAAI,UAAU;QACzB,YAAY,IAAI,WAAW;QAC3B,SAAS,IAAI,OAAO;IACtB;AACF;AAEA,SAAS,YAAY,GAAwB;IAC3C,OAAO;QACL,IAAI,IAAI,EAAE;QACV,MAAM,IAAI,IAAI;QACd,SAAS,IAAI,OAAO;QACpB,MAAM,IAAI,IAAI;QACd,OAAO,IAAI,KAAK;QAChB,gBAAgB,IAAI,eAAe;QACnC,gBAAgB,IAAI,gBAAgB;QACpC,WAAW,IAAI,UAAU;QACzB,WAAW,IAAI,UAAU;IAC3B;AACF;AAEA,eAAe,aAAa,QAAkB;IAC5C,IAAI;QACF,OAAO,MAAM,SAAS,IAAI;IAC5B,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEA,SAAS,YAAY,KAAa;IAChC,OAAO,MACJ,OAAO,CAAC,UAAU,CAAC,QAAU,CAAC,CAAC,EAAE,MAAM,WAAW,IAAI,EACtD,OAAO,CAAC,MAAM;AACnB;AAEA,SAAS,gBAAgB,OAAgC;IACvD,OAAO,OAAO,OAAO,CAAC,SAAS,MAAM,CAA0B,CAAC,KAAK,CAAC,KAAK,MAAM;QAC/E,IAAI,MAAM,OAAO,CAAC,QAAQ;YACxB,GAAG,CAAC,YAAY,KAAK,GAAG;YACxB,OAAO;QACT;QACA,GAAG,CAAC,YAAY,KAAK,GAAG;QACxB,OAAO;IACT,GAAG,CAAC;AACN","debugId":null}},
    {"offset": {"line": 395, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jdc/Desktop/Bmad-Method/apps/web/app/playbooks/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useMemo, useState } from 'react';\r\n\r\nimport { SectionHeader } from '@/components/layout/SectionHeader';\r\nimport { ResponsiveGrid } from '@/components/layout/ResponsiveGrid';\r\nimport { Card } from '@/components/ui/Card';\r\nimport { StatusBadge } from '@/components/ui/StatusBadge';\r\nimport {\r\n  executePlaybook,\r\n  listPlaybooks,\r\n  PlaybookExecutionResponse,\r\n  PlaybookTemplate\r\n} from '@/services/api/playbooks';\r\nimport { CoreApiError } from '@/services/api/housekeeping';\r\n\r\nconst DATE_TIME_FORMATTER = new Intl.DateTimeFormat('pt-PT', {\r\n  dateStyle: 'short',\r\n  timeStyle: 'short'\r\n});\r\n\r\ntype ExecutionFeedback = {\r\n  status: 'success' | 'error';\r\n  message: string;\r\n  payload?: PlaybookExecutionResponse;\r\n};\r\n\r\nexport default function PlaybooksPage() {\r\n  const [playbooks, setPlaybooks] = useState<PlaybookTemplate[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [search, setSearch] = useState<string>('');\r\n  const [activeTags, setActiveTags] = useState<Set<string>>(new Set());\r\n  const [executingId, setExecutingId] = useState<number | null>(null);\r\n  const [executionFeedback, setExecutionFeedback] = useState<Record<number, ExecutionFeedback>>({});\r\n\r\n  useEffect(() => {\r\n    const controller = new AbortController();\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    listPlaybooks(controller.signal)\r\n      .then((templates) => {\r\n        if (controller.signal.aborted) {\r\n          return;\r\n        }\r\n        setPlaybooks(templates);\r\n      })\r\n      .catch((apiError: unknown) => {\r\n        if (controller.signal.aborted) {\r\n          return;\r\n        }\r\n        if (apiError instanceof CoreApiError) {\r\n          setError(\r\n            apiError.status >= 500\r\n              ? 'Serviço de playbooks indisponível. Tente novamente em instantes.'\r\n              : 'Não foi possível carregar a biblioteca de playbooks.'\r\n          );\r\n        } else {\r\n          setError('Ocorreu um erro inesperado ao carregar os playbooks.');\r\n        }\r\n      })\r\n      .finally(() => {\r\n        if (!controller.signal.aborted) {\r\n          setLoading(false);\r\n        }\r\n      });\r\n\r\n    return () => controller.abort();\r\n  }, []);\r\n\r\n  const tags = useMemo(() => {\r\n    const collected = new Set<string>();\r\n    playbooks.forEach((template) => {\r\n      template.tags.forEach((tag) => collected.add(tag));\r\n    });\r\n    return Array.from(collected).sort((a, b) => a.localeCompare(b));\r\n  }, [playbooks]);\r\n\r\n  const filteredPlaybooks = useMemo(() => {\r\n    const normalizedSearch = search.trim().toLowerCase();\r\n    return playbooks.filter((template) => {\r\n      const matchesSearch =\r\n        normalizedSearch.length === 0 ||\r\n        template.name.toLowerCase().includes(normalizedSearch) ||\r\n        template.summary.toLowerCase().includes(normalizedSearch) ||\r\n        template.steps.some((step) => step.toLowerCase().includes(normalizedSearch));\r\n\r\n      const matchesTags =\r\n        activeTags.size === 0 || template.tags.some((tag) => activeTags.has(tag));\r\n\r\n      return matchesSearch && matchesTags;\r\n    });\r\n  }, [activeTags, playbooks, search]);\r\n\r\n  const handleToggleTag = (tag: string) => {\r\n    setActiveTags((previous) => {\r\n      const next = new Set(previous);\r\n      if (next.has(tag)) {\r\n        next.delete(tag);\r\n      } else {\r\n        next.add(tag);\r\n      }\r\n      return next;\r\n    });\r\n  };\r\n\r\n  const handleExecute = async (playbook: PlaybookTemplate) => {\r\n    setExecutingId(playbook.id);\r\n    setExecutionFeedback((current) => {\r\n      const next = { ...current };\r\n      delete next[playbook.id];\r\n      return next;\r\n    });\r\n\r\n    try {\r\n      const execution = await executePlaybook(playbook.id, 'web-playbooks');\r\n      setExecutionFeedback((current) => ({\r\n        ...current,\r\n        [playbook.id]: {\r\n          status: 'success',\r\n          message: execution.message,\r\n          payload: execution\r\n        }\r\n      }));\r\n      setPlaybooks((current) =>\r\n        current.map((template) =>\r\n          template.id === playbook.id\r\n            ? {\r\n                ...template,\r\n                executionCount: template.executionCount + 1,\r\n                lastExecutedAt: execution.finishedAt ?? execution.startedAt\r\n              }\r\n            : template\r\n        )\r\n      );\r\n    } catch (apiError: unknown) {\r\n      const message =\r\n        apiError instanceof CoreApiError && apiError.status >= 500\r\n          ? 'Falha ao contactar o orquestrador de playbooks.'\r\n          : 'Não foi possível iniciar a execução. Tente novamente.';\r\n      setExecutionFeedback((current) => ({\r\n        ...current,\r\n        [playbook.id]: { status: 'error', message }\r\n      }));\r\n    } finally {\r\n      setExecutingId(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"playbooks-page\">\r\n      <SectionHeader\r\n        subtitle=\"Biblioteca inicial alinhada ao roadmap BL-03\"\r\n        actions={\r\n          <input\r\n            type=\"search\"\r\n            value={search}\r\n            onChange={(event) => setSearch(event.target.value)}\r\n            placeholder=\"Pesquisar por nome, tag ou etapa\"\r\n            aria-label=\"Pesquisar playbooks\"\r\n            data-testid=\"playbook-search\"\r\n          />\r\n        }\r\n      >\r\n        Playbooks automatizados\r\n      </SectionHeader>\r\n\r\n      <div className=\"toolbar\" role=\"group\" aria-label=\"Filtros por tag\">\r\n        {tags.map((tag) => {\r\n          const isActive = activeTags.has(tag);\r\n          return (\r\n            <button\r\n              key={tag}\r\n              type=\"button\"\r\n              className={isActive ? 'tag active' : 'tag'}\r\n              onClick={() => handleToggleTag(tag)}\r\n              data-active={isActive}\r\n              data-testid=\"playbook-tag-filter\"\r\n              data-tag={tag}\r\n            >\r\n              #{tag}\r\n            </button>\r\n          );\r\n        })}\r\n        {tags.length === 0 && !loading && (\r\n          <span className=\"empty-tags\">Nenhuma tag cadastrada ainda.</span>\r\n        )}\r\n      </div>\r\n\r\n      {error && <p className=\"error\" role=\"alert\">{error}</p>}\r\n      {loading && <p className=\"loading\">A carregar playbooks…</p>}\r\n\r\n      <ResponsiveGrid columns={3}>\r\n        {filteredPlaybooks.map((playbook) => {\r\n          const feedback = executionFeedback[playbook.id];\r\n          const hasExecutions = playbook.executionCount > 0;\r\n          const lastRunLabel = hasExecutions\r\n            ? `Última execução ${playbook.lastExecutedAt ? DATE_TIME_FORMATTER.format(new Date(playbook.lastExecutedAt)) : 'não registrada'}`\r\n            : 'Ainda não executado';\r\n\r\n          return (\r\n            <Card\r\n              key={playbook.id}\r\n              title={playbook.name}\r\n              description={playbook.summary}\r\n              accent={hasExecutions ? 'success' : undefined}\r\n            >\r\n              <div className=\"card-header\" data-testid=\"playbook-card\" data-playbook-id={playbook.id}>\r\n                <StatusBadge variant={hasExecutions ? 'success' : 'neutral'}>\r\n                  {hasExecutions\r\n                    ? `${playbook.executionCount} execuções registradas`\r\n                    : 'Novo template'}\r\n                </StatusBadge>\r\n                <span className=\"last-run\">{lastRunLabel}</span>\r\n              </div>\r\n              {playbook.tags.length > 0 && (\r\n                <ul className=\"tags\" aria-label={`Tags do playbook ${playbook.name}`}>\r\n                  {playbook.tags.map((tag) => (\r\n                    <li key={tag}>#{tag}</li>\r\n                  ))}\r\n                </ul>\r\n              )}\r\n              <ol className=\"steps\">\r\n                {playbook.steps.map((step) => (\r\n                  <li key={step}>{step}</li>\r\n                ))}\r\n              </ol>\r\n              <button\r\n                type=\"button\"\r\n                className=\"run-button\"\r\n                onClick={() => handleExecute(playbook)}\r\n                disabled={executingId === playbook.id}\r\n                data-testid=\"playbook-run-button\"\r\n              >\r\n                {executingId === playbook.id ? 'A iniciar…' : 'Iniciar execução'}\r\n              </button>\r\n              {feedback && (\r\n                <p className={`feedback ${feedback.status}`} data-testid=\"playbook-feedback\">\r\n                  {feedback.message}\r\n                  {feedback.payload && (\r\n                    <span className=\"run-id\"> Referência: {feedback.payload.runId}</span>\r\n                  )}\r\n                </p>\r\n              )}\r\n            </Card>\r\n          );\r\n        })}\r\n        {!loading && filteredPlaybooks.length === 0 && (\r\n          <Card title=\"Nenhum playbook encontrado\">\r\n            <p>Experimente ajustar a pesquisa ou remover filtros de tags.</p>\r\n          </Card>\r\n        )}\r\n      </ResponsiveGrid>\r\n\r\n      <style jsx>{`\r\n        .playbooks-page {\r\n          display: grid;\r\n          gap: var(--space-6);\r\n        }\r\n        input[type='search'] {\r\n          min-width: 280px;\r\n          border: 1px solid var(--color-neutral-4);\r\n          border-radius: var(--radius-sm);\r\n          padding: var(--space-2) var(--space-3);\r\n          font-size: 0.95rem;\r\n        }\r\n        .toolbar {\r\n          display: flex;\r\n          flex-wrap: wrap;\r\n          gap: var(--space-3);\r\n          align-items: center;\r\n        }\r\n        .tag {\r\n          border: 1px solid var(--color-neutral-4);\r\n          border-radius: var(--radius-pill);\r\n          padding: 0 var(--space-3);\r\n          height: 32px;\r\n          background: var(--color-neutral-0);\r\n          cursor: pointer;\r\n          font-weight: 600;\r\n        }\r\n        .tag.active,\r\n        .tag[data-active='true'] {\r\n          background: var(--color-deep-blue);\r\n          color: #fff;\r\n          border-color: var(--color-deep-blue);\r\n        }\r\n        .empty-tags {\r\n          color: var(--color-neutral-3);\r\n          font-size: 0.9rem;\r\n        }\r\n        .error {\r\n          color: var(--color-coral);\r\n          font-weight: 600;\r\n        }\r\n        .loading {\r\n          color: var(--color-neutral-2);\r\n        }\r\n        .card-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          gap: var(--space-3);\r\n        }\r\n        .last-run {\r\n          font-size: 0.85rem;\r\n          color: var(--color-neutral-3);\r\n        }\r\n        .tags {\r\n          list-style: none;\r\n          display: flex;\r\n          gap: var(--space-2);\r\n          padding: 0;\r\n          margin: 0;\r\n          flex-wrap: wrap;\r\n        }\r\n        .tags li {\r\n          background: rgba(37, 99, 235, 0.08);\r\n          color: var(--color-deep-blue);\r\n          padding: 0 var(--space-2);\r\n          border-radius: var(--radius-sm);\r\n          font-size: 0.75rem;\r\n          font-weight: 600;\r\n        }\r\n        .steps {\r\n          margin: 0;\r\n          padding-left: var(--space-5);\r\n          display: grid;\r\n          gap: var(--space-2);\r\n        }\r\n        .run-button {\r\n          background: var(--color-deep-blue);\r\n          color: #fff;\r\n          border: none;\r\n          border-radius: var(--radius-sm);\r\n          padding: var(--space-2) var(--space-4);\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n        }\r\n        .run-button:disabled {\r\n          opacity: 0.6;\r\n          cursor: not-allowed;\r\n        }\r\n        .feedback {\r\n          margin: 0;\r\n          font-size: 0.85rem;\r\n        }\r\n        .feedback.success {\r\n          color: var(--color-soft-aqua);\r\n        }\r\n        .feedback.error {\r\n          color: var(--color-coral);\r\n        }\r\n        .run-id {\r\n          display: block;\r\n          margin-top: var(--space-1);\r\n          font-size: 0.75rem;\r\n          color: var(--color-neutral-3);\r\n        }\r\n        @media (max-width: 1024px) {\r\n          input[type='search'] {\r\n            width: 100%;\r\n          }\r\n          .card-header {\r\n            flex-direction: column;\r\n            align-items: flex-start;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}